<!DOCTYPE html>
<html>
  <head>
    <title>Checkout</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  </head>

  <body>
    <script src="https://js.stripe.com/v3/"></script>
    <script src="https://d.line-scdn.net/liff/1.0/sdk.js"></script>
    <script type="text/javascript">
      var api_key = "<%= api_key %>";
      var session_id = "<%= session_id %>";
      var stripe = Stripe(api_key);

      liff.init(
          function(data){
              stripe.redirectToCheckout({
                  sessionId: session_id
              }).then(function (result) {
                  // If `redirectToCheckout` fails due to a browser or network
                  // error, display the localized error message to your customer
                  // using `result.error.message`.
                  alert(result.error.message);
              });
          },
          function(error){
              // alert(JSON.stringify(error))
          }
      );
    </script>
  </body>
</html>